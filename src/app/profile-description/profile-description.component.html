<div class="profile-page">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loader">
      <div class="loader-circle"></div>
      <div class="loader-circle"></div>
      <div class="loader-circle"></div>
    </div>
    <p class="loading-text">Loading profile...</p>
  </div>

  <div *ngIf="errorMessage && !isLoading" class="error-state">
    <div class="error-card">
      <svg class="error-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="8" x2="12" y2="12"/>
        <line x1="12" y1="16" x2="12.01" y2="16"/>
      </svg>
      <h3>Oops! Something went wrong</h3>
      <p>{{ errorMessage }}</p>
      <button class="retry-button" (click)="loadUserInfo()">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
        </svg>
        Try Again
      </button>
    </div>
  </div>

  <div *ngIf="userInfo && !isLoading" class="profile-content">
    
    <div class="profile-hero">
      <div class="cover-image"></div>
      <div class="profile-avatar-section">
        <div class="avatar-wrapper" *ngIf="userInfo.profileImage != ''">
          <img 
            [src]="userInfo.profileImage" 
            [alt]="userInfo.fullName"
            class="avatar-image"
          />
          <div class="avatar-badge online" *ngIf="isUserOnline">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                viewBox="0 0 24 24" fill="none" stroke="green" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="9" />
              <path d="M9 12l2 2 4-4" />
            </svg>
          </div>

          <div class="avatar-badge offline" *ngIf="!isUserOnline">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                viewBox="0 0 24 24" fill="none" stroke="gray" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="9" />
              <line x1="15" y1="9" x2="9" y2="15" />
              <line x1="9" y1="9" x2="15" y2="15" />
            </svg> 
          </div>
          
        </div>
        <div class="avatar-wrapper" *ngIf="userInfo.profileImage == ''">
          {{ userInfo.fullName.charAt(0).toUpperCase() }}
          <div class="avatar-badge">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
        </div>
        <div class="profile-header-info">
          <h1 class="profile-fullname">{{ userInfo.fullName }}</h1>
          <p class="profile-handle"> &#64;{{ userInfo.userName }}</p>
          <div class="profile-status online" *ngIf="isUserOnline">
            <span class="status-dot online"></span>
            <span class="status-text">Online</span>
          </div>
          <div class="profile-status offline" *ngIf="!isUserOnline">
            <span class="status-dot offline"></span>
            <span class="status-text">Offline</span>
        </div>
      </div>
    </div>
    </div>

    <div class="profile-grid">
      <div class="left-column">
        <div class="contact-card card">
          <div class="card-header">
            <h2 class="card-title">Contact Information</h2>
          </div>
          <div class="card-content">
            
            <div class="contact-item">
              <div class="contact-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect width="20" height="16" x="2" y="4" rx="2"/>
                  <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                </svg>
              </div>
              <div class="contact-details">
                <span class="contact-label">Email Address</span>
                <a [href]="'mailto:' + userInfo.email" class="contact-value">{{ userInfo.email }}</a>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                </svg>
              </div>
              <div class="contact-details">
                <span class="contact-label">Phone Number</span>
                <a [href]="'tel:' + userInfo.phoneNumber" class="contact-value">{{ formatPhoneNumber(userInfo.phoneNumber) }}</a>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
              </div>
              <div class="contact-details">
                <span class="contact-label">Username</span>
                <span class="contact-value">&#64;{{ userInfo.userName }}</span>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
              </div>
              <div class="contact-details">
                <span class="contact-label">Full Name</span>
                <span class="contact-value">{{ userInfo.fullName }}</span>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
              </div>
              <div class="contact-details">
                <span class="contact-label">User ID</span>
                <span class="contact-value user-id">{{ userInfo.userId }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="right-column">
        <div class="image-card card">
          <div class="card-header">
            <h2 class="card-title">Profile Picture</h2>
          </div>
          <div class="card-content">
            <div class="image-preview">
              <img 
                [src]="userInfo.profileImage" 
                [alt]="userInfo.fullName"
                class="preview-img"
              />
            </div>
            <div class="image-info">
              <p class="image-label">Image URL</p>
              <div class="url-display">
                <input 
                  type="text" 
                  [value]="userInfo.profileImage" 
                  readonly 
                  class="url-input"
                />
                <button class="copy-btn" (click)="copyToClipboard(userInfo.profileImage)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                    <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
        