<section class="body">
    <div class="box">
        <form #form="ngForm" (ngSubmit)="onRegister()">
            <div class="brand-header">
                <div class="brand-logo">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="url(#gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span class="brand-name">SpeakLio</span>
                </div>
                <p class="brand-tagline">Join the conversation</p>
            </div>

            <h2>Create Your Account</h2>

            <div class="profilePreview" (click)="triggerFileInput()">
                <img 
                    [src]="previewImageUrl || 'assets/default-avatar.jpg'" 
                    alt="Profile image preview"
                />

                <input
                    type="file"
                    #fileInput
                    accept="image/*"
                    hidden
                    (change)="onFileSelected($event)"
                />

                <div class="camera-button" (click)="triggerFileInput()">
                    <svg xmlns="http://www.w3.org/2000/svg" 
                        width="20" height="20" viewBox="0 0 24 24" 
                        fill="none" stroke="currentColor" stroke-width="2" 
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                        <circle cx="12" cy="13" r="4"/>
                    </svg>
                </div>

                <div *ngIf="previewImageUrl" class="remove-icon" (click)="removeImage($event)">
                    âœ–
                </div>
            </div>

            <div class="inputBox">
                <input 
                    type="text" 
                    name="userName" 
                    [(ngModel)]="register.UserName" 
                    required 
                    autocomplete="username"
                >
                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <label>Username</label>
            </div>

            <div class="inputBox">
                <input 
                    type="text" 
                    name="fullName" 
                    [(ngModel)]="register.FullName" 
                    required 
                    autocomplete="name"
                >
                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                <label>Full Name</label>
            </div>

            <div class="inputBox">
                <input 
                    type="email" 
                    name="email" 
                    [(ngModel)]="register.Email" 
                    required 
                    autocomplete="email"
                >
                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                <label>Email Address</label>
            </div>

            <div class="inputBox">
                <input 
                    type="tel" 
                    name="phoneNumber" 
                    [(ngModel)]="register.PhoneNumber" 
                    required 
                    autocomplete="tel"
                >
                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
                <label>Phone Number</label>
            </div>

            <div class="inputBox">
                <input 
                    type="password" 
                    name="password" 
                    [(ngModel)]="register.Password" 
                    required 
                    autocomplete="new-password"
                >
                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                <label>Password</label>
            </div>
            
            <div class="links">
                <a routerLink="/login">Already have an account?</a>
            </div>

            <div *ngIf="errorMessages?.length" class="error-messages">
                <ul>
                    <li *ngFor="let error of errorMessages">{{ error }}</li>
                </ul>
            </div>

            <button type="submit" [disabled]="isRegister" id="submit">
                <span *ngIf="!isRegister">Create Account</span>
                <span *ngIf="isRegister">Creating Account...</span>
            </button>

            <div class="divider">
                <span>Already a member?</span>
            </div>

            <div class="signin-prompt">
                Have an account? <a routerLink="/login">Sign in here</a>
            </div>
        </form>
    </div>
</section>