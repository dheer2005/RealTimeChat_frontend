<div class="home-container mt-2">
  <div class="header" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
    <h2>Messages</h2>
  </div>

  <div class="search-container">
    <input 
      type="text" 
      placeholder="Search users..." 
      (input)="onKeyPress($event)"
      class="search-input"
    />
  </div>

  <div *ngIf="IsLoader" class="loader-container">
    <div class="loader"></div>
    <p>Loading users...</p>
  </div>

  <div *ngIf="!IsLoader" class="users-list">
    <div 
      *ngFor="let user of filteredList()" 
      class="user-card"
      (click)="userCard(user.userName)"
    >
    <div class="user-avatar-container">
        <div class="user-avatar" *ngIf="user.profileImage == ''">
          {{ user.userName.charAt(0).toUpperCase() }}
        </div>
        <div class="user-avatar user-img-avatar" *ngIf="user.profileImage">
          <img [src]="user.profileImage" alt="{{ user.userName }}" height="50px" width="50px" />
        </div>
        <span 
          class="online-indicator" 
          [class.online]="isUserOnline(user.userName)"
          [class.offline]="!isUserOnline(user.userName)"
        ></span>
      </div>

      <div class="user-info">
        <div class="user-name-row">
          <span class="user-name">{{ user.userName }}</span>
          <span 
            *ngIf="user.unreadCount > 0" 
            class="unread-badge"
          >
            {{ user.unreadCount }}
          </span>
        </div>

        <div class="user-status">
          <span 
            *ngIf="isUserTyping(user.userName)" 
            class="typing-indicator"
          >
            <span class="typing-dots">
              <span></span>
              <span></span>
              <span></span>
            </span>
            typing...
          </span>
          
          <span 
            *ngIf="!isUserTyping(user.userName) && user.lastMessage" 
            class="last-message"
          >
            {{ user.lastMessageSender === userName ? 'You: ' : '' }}
            {{ user.lastMessage }}
          </span>
        </div>
      </div>

      <div class="chevron-icon">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path d="M7 4l6 6-6 6" stroke="currentColor" stroke-width="2" fill="none"/>
        </svg>
      </div>
    </div>

    <div *ngIf="filteredList().length === 0" class="empty-state">
      <p>No users found</p>
    </div>
  </div>
</div>