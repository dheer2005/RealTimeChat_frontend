<section class="container m-auto mt-4">
  <div class="messages-container ">
    <div class="d-flex flex-column justify-content-center align-items-center p-4">
      <h2 class="text-center">Messages</h2>
      <div class="search mt-3 w-100">
        <input 
          type="text" 
          (keyup)="onKeyPress($event)" 
          [(ngModel)]="this.filter" 
          placeholder="Search conversations..."
        />
      </div>
    </div>
    
    <div class="user-list">
      <div *ngFor="let users of filteredList()">
        <div class="users" (click)="userCard(users.userName)">
          <div class="img">{{ users.userName.charAt(0).toUpperCase() }}</div>
          <div class="user-info">
            <div class="username">{{ users.userName }}</div>
            <div class="lastMsg" *ngIf="users.lastMessage">
              <strong>{{ users.lastMessageSender }}:</strong> 
              {{ users.lastMessage | slice:0:35 }}{{ users.lastMessage.length > 35 ? '...' : '' }}
            </div>
          </div>
          <div class="msgAlerts" *ngIf="users.unreadCount > 0">
            {{ users.unreadCount }}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Loading Spinner -->
<div class="loading-overlay" *ngIf="IsLoader">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>